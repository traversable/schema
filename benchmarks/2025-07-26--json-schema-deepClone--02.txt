clk: ~3.03 GHz
cpu: Apple M1 Pro
runtime: node 22.13.1 (arm64-darwin)

benchmark                   avg (min â€¦ max) p75 / p99    (min â€¦ top 1%)
------------------------------------------- -------------------------------
â€¢ ã€–ğŸï¸ã€—â€ºâ€ºâ€º JsonSchema.deepClone: object (deep)
------------------------------------------- -------------------------------
Lodash                         1.52 ms/iter   1.96 ms    â–ˆ
                        (1.01 ms â€¦ 2.37 ms)   2.18 ms   â–ƒâ–ˆ            â–‡â–ƒ
                    (  1.91 kb â€¦   1.71 mb) 285.96 kb â–ƒâ–‚â–ˆâ–ˆâ–…â–‚â–â–â–â–â–â–â–â–â–â–…â–ˆâ–ˆâ–ƒâ–‚â–
                  4.33 ipc (  1.27% stalls)  98.52% L1 data cache
          4.46M cycles  19.28M instructions  32.56% retired LD/ST (  6.28M)

JsonJoy                       91.53 Âµs/iter  80.38 Âµs  â–ˆ
                       (39.63 Âµs â€¦ 1.03 ms) 739.08 Âµs  â–ˆ
                    (240.00  b â€¦ 235.98 kb)  54.64 kb â–‡â–ˆâ–†â–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–
                  3.63 ipc (  1.58% stalls)  97.90% L1 data cache
        266.45k cycles 966.70k instructions  35.01% retired LD/ST (338.42k)

structuredClone              229.51 Âµs/iter 197.04 Âµs  â–ˆ
                      (149.42 Âµs â€¦ 1.20 ms) 948.92 Âµs  â–ˆ
                    ( 74.46 kb â€¦ 203.01 kb)  74.61 kb â–‚â–ˆâ–ƒâ–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–‚â–
                  3.90 ipc (  1.52% stalls)  98.59% L1 data cache
        668.93k cycles   2.61M instructions  34.99% retired LD/ST (913.93k)

JSON.stringify + JSON.parse  203.37 Âµs/iter 176.46 Âµs  â–ˆ
                      (142.88 Âµs â€¦ 1.18 ms) 843.29 Âµs â–…â–ˆ
                    ( 10.50 kb â€¦ 182.59 kb)  45.01 kb â–ˆâ–ˆâ–„â–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–‚â–
                  3.44 ipc (  1.30% stalls)  98.34% L1 data cache
        597.01k cycles   2.05M instructions  37.05% retired LD/ST (759.89k)

JsonSchema.deepClone           9.28 Âµs/iter   9.36 Âµs                â–ˆ
                        (9.02 Âµs â€¦ 9.55 Âµs)   9.47 Âµs       â–‡â–‚ â–‡â–‚â–‡â–‚ â–‚â–ˆ  â–‚ â–‚
                    (  1.31  b â€¦  18.42 kb)   1.09 kb â–†â–â–â–†â–†â–â–ˆâ–ˆâ–†â–ˆâ–ˆâ–ˆâ–ˆâ–†â–ˆâ–ˆâ–†â–â–ˆâ–â–ˆ
                  4.60 ipc (  1.72% stalls)  98.59% L1 data cache
         29.39k cycles 135.25k instructions  35.48% retired LD/ST ( 47.99k)

                             â”Œ                                            â”
                      Lodash â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  1.52 ms
                     JsonJoy â”¤â– â–  91.53 Âµs
             structuredClone â”¤â– â– â– â– â–  229.51 Âµs
 JSON.stringify + JSON.parse â”¤â– â– â– â–  203.37 Âµs
        JsonSchema.deepClone â”¤ 9.28 Âµs
                             â””                                            â”˜

summary
  JsonSchema.deepClone
   9.86x faster than JsonJoy
   21.91x faster than JSON.stringify + JSON.parse
   24.72x faster than structuredClone
   163.89x faster than Lodash

clk: ~3.03 GHz
cpu: Apple M1 Pro
runtime: node 22.13.1 (arm64-darwin)

benchmark                   avg (min â€¦ max) p75 / p99    (min â€¦ top 1%)
------------------------------------------- -------------------------------
â€¢ ã€–ğŸï¸ã€—â€ºâ€ºâ€º JsonSchema.deepClone: array (deep)
------------------------------------------- -------------------------------
Lodash                         4.14 ms/iter   4.17 ms    â–ˆâ–†â–ˆ
                        (3.97 ms â€¦ 5.29 ms)   4.67 ms   â–‡â–ˆâ–ˆâ–ˆâ–‡â–…
                    (152.00  b â€¦ 644.38 kb)  46.69 kb â–ƒâ–…â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–…â–…â–‚â–ƒâ–â–â–â–â–â–â–â–â–
                  4.45 ipc (  1.19% stalls)  98.66% L1 data cache
         12.28M cycles  54.69M instructions  32.45% retired LD/ST ( 17.75M)

JsonJoy                      220.10 Âµs/iter 209.38 Âµs   â–ˆ
                      (109.33 Âµs â€¦ 1.15 ms) 919.17 Âµs  â–ˆâ–ˆ
                    (496.00  b â€¦ 416.73 kb) 149.03 kb â–ƒâ–ˆâ–ˆâ–ˆâ–ƒâ–â–â–â–â–â–â–â–â–â–â–â–â–â–‚â–‚â–
                  3.93 ipc (  1.38% stalls)  98.26% L1 data cache
        642.92k cycles   2.53M instructions  35.56% retired LD/ST (898.55k)

structuredClone              580.96 Âµs/iter 541.50 Âµs   â–ˆ
                      (418.08 Âµs â€¦ 1.44 ms)   1.38 ms   â–ˆ
                    (207.94 kb â€¦ 211.49 kb) 208.08 kb â–†â–‚â–ˆâ–‡â–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–‚â–‚â–‚
                  4.11 ipc (  1.31% stalls)  98.87% L1 data cache
          1.73M cycles   7.10M instructions  35.31% retired LD/ST (  2.51M)

JSON.stringify + JSON.parse  591.56 Âµs/iter 517.50 Âµs   â–ˆ
                      (415.46 Âµs â€¦ 1.30 ms)   1.23 ms  â–ˆâ–ˆ
                    ( 23.44 kb â€¦ 128.74 kb) 123.88 kb â–‚â–ˆâ–ˆâ–†â–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–‚â–†â–‚
                  3.41 ipc (  1.24% stalls)  98.39% L1 data cache
          1.74M cycles   5.93M instructions  37.13% retired LD/ST (  2.20M)

JsonSchema.deepClone         113.16 Âµs/iter 103.00 Âµs â–‡â–ˆ
                       (35.71 Âµs â€¦ 1.35 ms) 940.42 Âµs â–ˆâ–ˆâ–ƒ
                    ( 17.31 kb â€¦ 834.80 kb)  67.94 kb â–ˆâ–ˆâ–ˆâ–ƒâ–â–â–â–â–â–â–â–â–â–â–â–â–â–‚â–â–â–
                  3.01 ipc (  2.07% stalls)  96.71% L1 data cache
        321.01k cycles 966.35k instructions  36.65% retired LD/ST (354.19k)

                             â”Œ                                            â”
                      Lodash â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  4.14 ms
                     JsonJoy â”¤â–  220.10 Âµs
             structuredClone â”¤â– â– â– â–  580.96 Âµs
 JSON.stringify + JSON.parse â”¤â– â– â– â–  591.56 Âµs
        JsonSchema.deepClone â”¤ 113.16 Âµs
                             â””                                            â”˜

summary
  JsonSchema.deepClone
   1.95x faster than JsonJoy
   5.13x faster than structuredClone
   5.23x faster than JSON.stringify + JSON.parse
   36.6x faster than Lodash

clk: ~3.03 GHz
cpu: Apple M1 Pro
runtime: node 22.13.1 (arm64-darwin)

benchmark                   avg (min â€¦ max) p75 / p99    (min â€¦ top 1%)
------------------------------------------- -------------------------------
â€¢ ã€–ğŸï¸ã€—â€ºâ€ºâ€º JsonSchema.deepClone: tuple
------------------------------------------- -------------------------------
Lodash                         5.90 Âµs/iter   5.93 Âµs         â–ˆâ–‚
                        (5.77 Âµs â€¦ 6.16 Âµs)   6.13 Âµs â–‚ â–…â–‚ â–‡â–‚â–‡â–ˆâ–ˆâ–‡
                    (  5.70  b â€¦   1.97 kb) 236.00  b â–ˆâ–‡â–ˆâ–ˆâ–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–‡â–„â–„â–â–â–â–â–„
                  4.81 ipc (  0.69% stalls)  99.31% L1 data cache
         18.72k cycles  90.11k instructions  33.61% retired LD/ST ( 30.29k)

JsonJoy                      469.46 ns/iter 552.82 ns    â–ˆ
                    (333.69 ns â€¦ 735.85 ns) 653.50 ns   â–ˆâ–ˆâ–„        â–‚
                    ( 94.13  b â€¦ 848.25  b) 461.48  b â–â–„â–ˆâ–ˆâ–ˆâ–„â–„â–ƒâ–‚â–ƒâ–„â–†â–ˆâ–ˆâ–ˆâ–ˆâ–†â–…â–ƒâ–„â–‚
                  4.81 ipc (  1.40% stalls)  98.39% L1 data cache
          1.34k cycles   6.45k instructions  35.14% retired LD/ST (  2.27k)

structuredClone                1.72 Âµs/iter   1.73 Âµs     â–‚ â–ˆâ–ˆâ–…â–ˆ
                        (1.67 Âµs â€¦ 1.85 Âµs)   1.80 Âµs    â–ˆâ–ˆâ–‡â–ˆâ–ˆâ–ˆâ–ˆâ–‡ â–‚
                    (  5.94  b â€¦  68.93  b)  20.02  b â–„â–„â–…â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–…â–ƒâ–‚â–ƒâ–‚â–â–‚
                  4.89 ipc (  1.31% stalls)  98.68% L1 data cache
          5.26k cycles  25.71k instructions  35.30% retired LD/ST (  9.08k)

JSON.stringify + JSON.parse    1.29 Âµs/iter   1.31 Âµs    â–†â–ˆâ–‚
                        (1.24 Âµs â€¦ 1.42 Âµs)   1.41 Âµs   â–ˆâ–ˆâ–ˆâ–ˆâ–„â–‡â–…â–‚
                    (  3.34  b â€¦ 183.73  b)  15.33  b â–‚â–ƒâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–ƒâ–„â–‚â–‚â–‚â–â–‚
                  4.64 ipc (  1.05% stalls)  98.96% L1 data cache
          3.88k cycles  18.00k instructions  36.64% retired LD/ST (  6.59k)

JsonSchema.deepClone         276.76 ns/iter 332.42 ns â–ˆ â–ƒ    â–‚
                    (113.56 ns â€¦ 637.82 ns) 594.93 ns â–ˆ â–ˆâ–ƒ   â–ˆ         â–ˆ
                    ( 17.86  b â€¦ 432.18  b) 138.20  b â–ˆâ–‡â–ˆâ–ˆâ–‚â–‚â–ˆâ–ˆâ–„â–‚â–â–â–â–â–â–â–…â–ˆâ–†â–ƒâ–
                  3.62 ipc (  2.02% stalls)  97.49% L1 data cache
         762.80 cycles   2.76k instructions  36.87% retired LD/ST (  1.02k)

                             â”Œ                                            â”
                      Lodash â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  5.90 Âµs
                     JsonJoy â”¤â–  469.46 ns
             structuredClone â”¤â– â– â– â– â– â– â– â– â–  1.72 Âµs
 JSON.stringify + JSON.parse â”¤â– â– â– â– â– â–  1.29 Âµs
        JsonSchema.deepClone â”¤ 276.76 ns
                             â””                                            â”˜

summary
  JsonSchema.deepClone
   1.7x faster than JsonJoy
   4.67x faster than JSON.stringify + JSON.parse
   6.2x faster than structuredClone
   21.32x faster than Lodash

clk: ~2.93 GHz
cpu: Apple M1 Pro
runtime: node 22.13.1 (arm64-darwin)

benchmark                   avg (min â€¦ max) p75 / p99    (min â€¦ top 1%)
------------------------------------------- -------------------------------
â€¢ ã€–ğŸï¸ã€—â€ºâ€ºâ€º JsonSchema.deepClone: object (shallow)
------------------------------------------- -------------------------------
Lodash                       668.37 ns/iter 873.10 ns                 â–‚â–ˆ
                      (293.70 ns â€¦ 1.12 Âµs) 985.38 ns â–‚    â–† â–ˆ        â–ˆâ–ˆ
                    (  7.85  b â€¦   1.02 kb) 638.24  b â–ˆâ–‚â–â–â–„â–ˆâ–ˆâ–ˆâ–…â–‚â–â–â–â–â–â–‚â–ˆâ–ˆâ–ˆâ–ƒâ–‚
                  4.31 ipc (  1.49% stalls)  98.87% L1 data cache
          1.90k cycles   8.19k instructions  38.61% retired LD/ST (  3.16k)

JsonJoy                      180.86 ns/iter 178.25 ns     â–ˆ
                     (97.55 ns â€¦ 449.06 ns) 354.59 ns    â–„â–ˆâ–…
                    (  0.54  b â€¦ 343.06  b) 117.47  b â–‚â–â–â–ˆâ–ˆâ–ˆâ–ƒâ–â–â–â–â–â–„â–…â–„â–ƒâ–‚â–‚â–â–â–
                  5.10 ipc (  2.02% stalls)  98.70% L1 data cache
         514.93 cycles   2.63k instructions  34.23% retired LD/ST ( 899.57)

structuredClone                1.07 Âµs/iter   1.09 Âµs      â–†â–‡â–ˆ
                        (1.01 Âµs â€¦ 1.22 Âµs)   1.16 Âµs    â–‡â–‡â–ˆâ–ˆâ–ˆâ–†â–‡ â–„
                    (  8.32  b â€¦ 363.89  b)  29.36  b â–‚â–„â–‡â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‡â–†â–…â–†â–ƒâ–‚â–‚â–ƒ
                  4.64 ipc (  1.42% stalls)  97.97% L1 data cache
          3.17k cycles  14.73k instructions  34.88% retired LD/ST (  5.14k)

JSON.stringify + JSON.parse  499.95 ns/iter 527.89 ns  â–ˆ    â–ˆ
                    (430.78 ns â€¦ 753.47 ns) 735.39 ns  â–ˆ    â–ˆ
                    (  2.43  b â€¦ 318.38  b) 120.32  b â–‡â–ˆâ–…â–â–â–‚â–ˆâ–ˆâ–„â–‚â–ƒâ–‚â–â–â–â–â–â–â–â–‚â–
                  5.15 ipc (  0.74% stalls)  98.86% L1 data cache
          1.54k cycles   7.95k instructions  37.09% retired LD/ST (  2.95k)

JsonSchema.deepClone          76.09 ns/iter  72.53 ns     â–ˆ
                     (19.60 ns â€¦ 417.50 ns) 227.07 ns    â–ˆâ–ˆâ–†
                    (  0.96  b â€¦ 256.13  b)  76.98  b â–‚â–â–â–ˆâ–ˆâ–ˆâ–…â–ƒâ–â–â–â–â–â–â–â–‚â–‚â–‚â–‚â–‚â–
                  4.19 ipc (  1.96% stalls)  98.64% L1 data cache
         212.34 cycles  888.95 instructions  39.92% retired LD/ST ( 354.90)

                             â”Œ                                            â”
                      Lodash â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  668.37 ns
                     JsonJoy â”¤â– â– â– â–  180.86 ns
             structuredClone â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  1.07 Âµs
 JSON.stringify + JSON.parse â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  499.95 ns
        JsonSchema.deepClone â”¤ 76.09 ns
                             â””                                            â”˜

summary
  JsonSchema.deepClone
   2.38x faster than JsonJoy
   6.57x faster than JSON.stringify + JSON.parse
   8.78x faster than Lodash
   14.06x faster than structuredClone


ã€–ğŸï¸ã€—â€ºâ€ºâ€º JsonSchema.deepClone: Fuzz
  data: [
    [
      [
        true,
        true,
        false
      ],
      [
        false,
        false,
        false
      ],
      [
        true,
        false,
        false
      ]
    ],
    -1.7976931348623143e+308
  ]


  schema: {
    "type": "array",
    "prefixItems": [
      {
        "type": "array",
        "items": {
          "type": "array",
          "prefixItems": [
            {
              "type": "boolean"
            },
            {
              "type": "boolean"
            },
            {
              "type": "boolean"
            }
          ]
        }
      },
      {
        "type": "number",
        "maximum": -8.4e-323
      }
    ]
  }

clk: ~3.00 GHz
cpu: Apple M1 Pro
runtime: node 22.13.1 (arm64-darwin)

benchmark                   avg (min â€¦ max) p75 / p99    (min â€¦ top 1%)
------------------------------------------- -------------------------------
â€¢ ã€–ğŸï¸ã€—â€ºâ€ºâ€º JsonSchema.deepClone: fuzz
------------------------------------------- -------------------------------
structuredClone                1.44 Âµs/iter   1.46 Âµs        â–†â–…â–ˆ
                        (1.36 Âµs â€¦ 1.54 Âµs)   1.53 Âµs       â–…â–ˆâ–ˆâ–ˆâ–ˆâ–‚â–…â–‚
                    (  9.30  b â€¦ 189.11  b)  25.74  b â–‚â–‚â–‚â–‚â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–„â–ƒâ–‚â–‚â–‚
                  4.46 ipc (  1.45% stalls)  98.66% L1 data cache
          4.30k cycles  19.20k instructions  36.34% retired LD/ST (  6.98k)

Lodash                         1.14 Âµs/iter   1.19 Âµs   â–ˆâ–‚ â–ˆâ–ƒ   â–† â–‚
                      (998.41 ns â€¦ 1.40 Âµs)   1.34 Âµs  â–‚â–ˆâ–ˆâ–…â–ˆâ–ˆâ–‡â–…â–ˆâ–ˆâ–‡â–ˆâ–‚â–‚
                    ( 28.03  b â€¦   2.27 kb) 430.45  b â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–†â–‡â–„â–…â–ƒâ–„
                  3.97 ipc (  2.07% stalls)  98.54% L1 data cache
          3.32k cycles  13.21k instructions  41.07% retired LD/ST (  5.43k)

JSON.stringify + JSON.parse    1.18 Âµs/iter   1.19 Âµs   â–ˆâ–†
                        (1.09 Âµs â€¦ 2.26 Âµs)   1.60 Âµs  â–„â–ˆâ–ˆ
                    (  3.09  b â€¦ 472.19  b)  22.93  b â–‚â–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–„â–ƒâ–‚â–â–‚â–â–â–â–â–â–â–â–â–
                  4.15 ipc (  1.13% stalls)  98.89% L1 data cache
          3.47k cycles  14.40k instructions  36.21% retired LD/ST (  5.21k)

JsonSchema.deepClone         268.24 ns/iter 292.34 ns         â–ƒâ–ˆ
                     (28.79 ns â€¦ 512.92 ns) 485.85 ns         â–ˆâ–ˆâ–†
                    (  6.31  b â€¦ 578.63  b) 330.44  b â–‚â–â–â–â–â–‚â–‚â–†â–ˆâ–ˆâ–ˆâ–‡â–…â–„â–ƒâ–ƒâ–ƒâ–ƒâ–„â–ƒâ–‚
                  2.97 ipc (  1.85% stalls)  98.25% L1 data cache
         727.52 cycles   2.16k instructions  41.77% retired LD/ST ( 903.45)

                             â”Œ                                            â”
             structuredClone â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  1.44 Âµs
                      Lodash â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  1.14 Âµs
 JSON.stringify + JSON.parse â”¤â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  1.18 Âµs
        JsonSchema.deepClone â”¤ 268.24 ns
                             â””                                            â”˜

summary
  JsonSchema.deepClone
   4.24x faster than Lodash
   4.42x faster than JSON.stringify + JSON.parse
   5.38x faster than structuredClone
